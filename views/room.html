{% extends "base.html" %}       {# ç»§æ‰¿base.htmlæ–‡ä»¶#}
 
{% block title %}å¼€æ{% endblock %}   {#  å®šåˆ¶titleéƒ¨åˆ†çš„å†…å®¹#}

{% block top %}
{{  super()  }}
{% endblock %}


{% block content %}
{{  super()  }}
<div class="container-fluid   " style="max-width: 1224px;">

    <div style="font-size: small; overflow-wrap: anywhere; "
        >
    </div>
    <div class="col-xs-12 col-md-8 offset-md-2  border-bottom">
        <div class="row pb-1 pt-2 justify-content-between  align-items-center">
            <div class="col-1 col-md-1 ">
                <div class="row">
                    <div class="p-0">
                        <a href="/uc#nav-home" class="btn" role="button">
                            <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24"
                                height="24" width="24" xmlns="http://www.w3.org/2000/svg" data-darkreader-inline-fill=""
                                data-darkreader-inline-stroke=""
                                style="--darkreader-inline-fill:currentColor; --darkreader-inline-stroke:currentColor;">
                                <path fill="none" d="M0 0h24v24H0z"></path>
                                <path d="M17.77 3.77L16 2 6 12l10 10 1.77-1.77L9.54 12z"></path>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-9 col-md-9 ps-4">
                <div class="p-0">
                    <div class="row justify-content-start p-0 align-items-center">
                        <div class="col p-0">
                            <button class="col-auto btn p-0" type="button" style="font-size: 12pt;">
                                <div class="chattitle p-0 pe-1 m-0">
                                    <span>ğŸ¨&nbsp;</span>{{room.title}}<span class="tesxt-secondary"
                                        style="font-weight: 400; font-size: 12px;">
                                        <svg stroke="currentColor" fill="currentColor" stroke-width="0"
                                            viewBox="0 0 512 512" height="1em" width="1em"
                                            xmlns="http://www.w3.org/2000/svg"
                                            style="margin-left: 0px; --darkreader-inline-fill:currentColor; --darkreader-inline-stroke:currentColor;"
                                            data-darkreader-inline-fill="" data-darkreader-inline-stroke="">
                                            <path fill="none" stroke-linecap="round" stroke-miterlimit="10"
                                                stroke-width="32"
                                                d="M431 320.6c-1-3.6 1.2-8.6 3.3-12.2a33.68 33.68 0 012.1-3.1A162 162 0 00464 215c.3-92.2-77.5-167-173.7-167-83.9 0-153.9 57.1-170.3 132.9a160.7 160.7 0 00-3.7 34.2c0 92.3 74.8 169.1 171 169.1 15.3 0 35.9-4.6 47.2-7.7s22.5-7.2 25.4-8.3a26.44 26.44 0 019.3-1.7 26 26 0 0110.1 2l56.7 20.1a13.52 13.52 0 003.9 1 8 8 0 008-8 12.85 12.85 0 00-.5-2.7z">
                                            </path>
                                            <path fill="none" stroke-linecap="round" stroke-miterlimit="10"
                                                stroke-width="32"
                                                d="M66.46 232a146.23 146.23 0 006.39 152.67c2.31 3.49 3.61 6.19 3.21 8s-11.93 61.87-11.93 61.87a8 8 0 002.71 7.68A8.17 8.17 0 0072 464a7.26 7.26 0 002.91-.6l56.21-22a15.7 15.7 0 0112 .2c18.94 7.38 39.88 12 60.83 12A159.21 159.21 0 00284 432.11">
                                            </path>
                                        </svg>{{room.hotvalue}}</span>
                                </div>
                            </button>
                            <div class="p-0 m-0" style="font-size: 13px;"><span
                                    style="color: rgb(119, 119, 119); --darkreader-inline-color:#9e9587;"
                                    data-darkreader-inline-color="">created by </span><a class="p-0 m-0" role="button"
                                    href="/public-profile/?char=e0B9YHaMmzwwvPfvKT5QRP6s2BxvYJghkQWhoNbLJ6A&amp;username=Touch_Night"
                                    style="color: inherit; text-decoration: inherit; --darkreader-inline-color: inherit;"
                                    data-darkreader-inline-color="">@{{room.owner.name}}</a></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-2 col-md-2">
                <div class="row align-items-center justify-content-end">
                    <div class="col-auto p-0 pe-2">
                        <div class="row align-items-center"><button class="btn col-auto px-0" title="åˆ†äº«"><svg
                                    stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512"
                                    height="24" width="24" xmlns="http://www.w3.org/2000/svg"
                                    data-darkreader-inline-fill="" data-darkreader-inline-stroke=""
                                    style="--darkreader-inline-fill:currentColor; --darkreader-inline-stroke:currentColor;">
                                    <path
                                        d="M444.7 230.4l-141.1-132c-1.7-1.6-3.3-2.5-5.6-2.4-4.4.2-10 3.3-10 8v66.2c0 2-1.6 3.8-3.6 4.1C144.1 195.8 85 300.8 64.1 409.8c-.8 4.3 5 8.3 7.7 4.9 51.2-64.5 113.5-106.6 212-107.4 2.2 0 4.2 2.6 4.2 4.8v65c0 7 9.3 10.1 14.5 5.3l142.1-134.3c2.6-2.4 3.4-5.2 3.5-8.4-.1-3.2-.9-6.9-3.4-9.3z">
                                    </path>
                                </svg></button>
                            <div class="col-auto px-2 dropdown">
                                
                                <span data-bs-toggle="dropdown" aria-haspopup="listbox"  class="" aria-expanded="false">
                                    <svg stroke="currentColor" fill="currentColor"
                                        stroke-width="0" viewBox="0 0 24 24" height="25" width="25"
                                        xmlns="http://www.w3.org/2000/svg" data-darkreader-inline-fill=""
                                        data-darkreader-inline-stroke=""
                                        style="--darkreader-inline-fill:currentColor; --darkreader-inline-stroke:currentColor;">
                                        <path
                                            d="M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 12c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z">
                                        </path>
                                    </svg>
                                </span>
                                <div tabindex="-1" role="listbox" aria-hidden="true" class="dropdown-menu">
                                    <button
                                        type="button" tabindex="0" role="option" class="dropdown-item"
                                        style="display: flex; align-items: center;">
                                        <div style="margin-right: 10px;"><svg stroke="currentColor" fill="currentColor"
                                                stroke-width="0" viewBox="0 0 24 24" height="24" width="24"
                                                xmlns="http://www.w3.org/2000/svg" data-darkreader-inline-fill=""
                                                data-darkreader-inline-stroke=""
                                                style="--darkreader-inline-fill:currentColor; --darkreader-inline-stroke:currentColor;">
                                                <path fill="none" d="M0 0h24v24H0z"></path>
                                                <circle cx="9" cy="9" r="4"></circle>
                                                <path
                                                    d="M9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm7.76-9.64l-1.68 1.69c.84 1.18.84 2.71 0 3.89l1.68 1.69c2.02-2.02 2.02-5.07 0-7.27zM20.07 2l-1.63 1.63c2.77 3.02 2.77 7.56 0 10.74L20.07 16c3.9-3.89 3.91-9.95 0-14z">
                                                </path>
                                            </svg></div>
                                        <div>Enable Character Voice</div>
                                    </button>
                                    <div tabindex="-1" class="dropdown-divider"></div>
                                    <button type="button" tabindex="0"
                                        role="option" class="dropdown-item" style="display: flex; align-items: center;">
                                        <div style="margin-right: 10px;"><svg stroke="currentColor" fill="currentColor"
                                                stroke-width="0" viewBox="0 0 24 24" height="24" width="24"
                                                xmlns="http://www.w3.org/2000/svg" data-darkreader-inline-fill=""
                                                data-darkreader-inline-stroke=""
                                                style="--darkreader-inline-fill:currentColor; --darkreader-inline-stroke:currentColor;">
                                                <path fill="none" d="M0 0h24v24H0z"></path>
                                                <path
                                                    d="M20.54 5.23l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM12 17.5L6.5 12H10v-2h4v2h3.5L12 17.5zM5.12 5l.81-1h12l.94 1H5.12z">
                                                </path>
                                            </svg></div>
                                        <div>Save and Start New Chat</div>
                                    </button>
                                    <button type="button" tabindex="0" role="option" class="dropdown-item"
                                        style="display: flex; align-items: center;">
                                        <div style="margin-right: 10px;"><svg stroke="currentColor" fill="currentColor"
                                                stroke-width="0" viewBox="0 0 24 24" height="24" width="24"
                                                xmlns="http://www.w3.org/2000/svg" data-darkreader-inline-fill=""
                                                data-darkreader-inline-stroke=""
                                                style="--darkreader-inline-fill:currentColor; --darkreader-inline-stroke:currentColor;">
                                                <g>
                                                    <path fill="none" d="M0 0L24 0 24 24 0 24z"></path>
                                                    <path
                                                        d="M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10c-1.702 0-3.305-.425-4.708-1.175L2 22l1.176-5.29C2.426 15.306 2 13.703 2 12 2 6.477 6.477 2 12 2zm0 2c-4.418 0-8 3.582-8 8 0 1.335.326 2.618.94 3.766l.35.654-.656 2.946 2.948-.654.653.349c1.148.614 2.43.939 3.765.939 4.418 0 8-3.582 8-8s-3.582-8-8-8zm1 3v5h4v2h-6V7h2z">
                                                    </path>
                                                </g>
                                            </svg></div>
                                        <div>View Saved Chats</div>
                                    </button>
                                    <button type="button" tabindex="0" role="option" class="dropdown-item"
                                        style="display: flex; align-items: center;">
                                        <div style="margin-right: 10px;"><svg stroke="currentColor" fill="none"
                                                stroke-width="0" viewBox="0 0 24 24" height="24" width="24"
                                                xmlns="http://www.w3.org/2000/svg" data-darkreader-inline-stroke=""
                                                style="--darkreader-inline-stroke:currentColor;">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                    d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
                                                </path>
                                            </svg></div>
                                        <div>Remove Messages</div>
                                    </button>
                                    <div tabindex="-1" class="dropdown-divider"></div>
                                    <a href="/room/edit/{{room.id}}" type="button" tabindex="0" 
                                        role="option" class="dropdown-item" style="display: flex; align-items: center;">
                                        <div style="margin-right: 10px;"><svg stroke="currentColor" fill="currentColor"
                                                stroke-width="0" viewBox="0 0 24 24" height="24" width="24"
                                                xmlns="http://www.w3.org/2000/svg" data-darkreader-inline-fill=""
                                                data-darkreader-inline-stroke=""
                                                style="--darkreader-inline-fill:currentColor; --darkreader-inline-stroke:currentColor;">
                                                <path fill="none" d="M0 0h24v24H0V0z"></path>
                                                <path
                                                    d="M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46a.5.5 0 00-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65A.488.488 0 0014 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1a.566.566 0 00-.18-.03c-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46a.5.5 0 00.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z">

                                                </path>
                                            </svg>
                                        </div>
                                        <div>View Character Settings</div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="text-danger row chatheaderbg-normal"><span class="text-center" style="font-size: 9pt;">è®°ä½:
                æ‰€æœ‰è§’è‰²éƒ½æ˜¯æ¼”æˆ!</span></div>
    </div>
</div>

<!-------------------------------------------------->
<div class="container-fluid p-0 justify-content-center " style="max-width: 1224px; overflow-y: hidden;">
    <div>
        <div class="container-fluid chatdisplay" style="margin-top: 50px;">
            <div class="col-xs-12 col-md-8 offset-md-2">
                <div class="row chatdisplay2" id="content">
                    <div id="scrollBar"
                        style="height: 576px; overflow: auto; display: flex; flex-direction: column-reverse;">
                        <div class="infinite-scroll-component__outerdiv">
                            <div class="infinite-scroll-component " id = "scrollview" name = "scrollview"
                                style="height: auto; overflow: auto; display: flex; flex-direction: column-reverse;">
                                <div class=""></div>


                               
                                

                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-0" style="height: 60px;"><span></span></div>
            </div>
        </div>
    </div>
</div>
<!----------------------------------------------------->
<div class="container-fluid chatbottom " style="max-width: 1224px;">
    <div class="col-xs-12 col-md-8 offset-md-2 border-top border-secondary">
        <div class="row chatfooterbg-normal">
            <form action="#" class="m-0 chatform">
                <div class="col-12 p-0 mt-2 mx-2 chatfooter align-self-center" style="margin-bottom: 30px;">
                    <div class="chatbox text-muted d-flex justify-content-start align-items-center p-0 bg-white mx-3">
                        <div class="col-auto ps-2 dropdown dropup">
                            <span data-bs-toggle="dropdown" aria-haspopup="listbox" class="" aria-expanded="false">
                                <div style="cursor: pointer;">
                                    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16"
                                        height="25" width="25" xmlns="http://www.w3.org/2000/svg"
                                        style="margin-right: 5px; --darkreader-inline-fill:currentColor; --darkreader-inline-stroke:currentColor;"
                                        data-darkreader-inline-fill="" data-darkreader-inline-stroke="">
                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z">
                                        </path>
                                        <path
                                            d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z">
                                        </path>

                                    </svg>
                                </div>
                            </span>
                            <div tabindex="-1" role="listbox" aria-hidden="true" class="dropdown-menu">
                                <button type="button" tabindex="0" role="option" class="dropdown-item"
                                    style="display: flex; align-items: center;">
                                    <div style="margin-right: 10px;">ğŸ¨</div>
                                    <div>Create Image</div>
                                </button>
                                <button type="button" tabindex="0" role="option" class="dropdown-item"
                                    style="display: flex; align-items: center;">
                                    <div style="margin-right: 10px;">ğŸ–¼</div>
                                    <div>Upload Image</div>
                                </button>
                            </div>
                        </div>
                        <div class="spinner-grow text-primary" id = "spinner-grow" role="status" style="display:none">
                            <span class="visually-hidden">Loading...</span>                        
                        </div> 
                        <div class="input-group me-3 my-0">

                            <input type="hidden" id="room_id" name="room_id" value="{{room.id}}"/>  

                            <textarea id="message" class="bg-white form-control border-success shadow-sm rounded-2" rows="1"
                                placeholder="Type a message"
                                style="font-size: 11pt; padding-left: 4px; height: 36px;"></textarea>

 
                            <button class="btn py-0" type="button" title="Submit Message" id="submit-message">
                                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24"
                                    height="25" width="25" xmlns="http://www.w3.org/2000/svg"
                                    style="color: rgb(60, 133, 246); --darkreader-inline-fill:currentColor; --darkreader-inline-stroke:currentColor; --darkreader-inline-color:#589ee0;"
                                    data-darkreader-inline-fill="" data-darkreader-inline-stroke=""
                                    data-darkreader-inline-color="">
                                    <path fill="none" d="M0 0h24v24H0z">

                                    </path>
                                    <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
                                </svg>
                            </button>
                            <button class="btn py-0" type="button" style="display:none">
                                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24"
                                    height="25" width="25" xmlns="http://www.w3.org/2000/svg"
                                    style="color: rgb(230, 100, 100); --darkreader-inline-fill:currentColor; --darkreader-inline-stroke:currentColor; --darkreader-inline-color:#d9706c;"
                                    data-darkreader-inline-fill="" data-darkreader-inline-stroke=""
                                    data-darkreader-inline-color="">
                                    <path fill="none" d="M0 0h24v24H0zm0 0h24v24H0z"></path>
                                    <path
                                        d="M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3L3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z">
                                    </path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<!----------------------------------------------------->

<iframe height="1" width="1"
    style="position: absolute; top: 0px; left: 0px; border: none; visibility: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;"
    data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom=""
    data-darkreader-inline-border-left=""></iframe>


<div style="position: static; display: none; width: 0px; height: 0px; border: none; padding: 0px; margin: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;"
    data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom=""
    data-darkreader-inline-border-left="">
    <div id="trans-tooltip">
        <div id="tip-left-top"
            style="background: url(&quot;chrome-extension://jpjgjbbhaifmiigkopmnpbgcgmigaame/imgs/map/tip-left-top.png&quot;); --darkreader-inline-bgcolor: initial;"
            data-darkreader-inline-bgcolor=""></div>
        <div id="tip-top"
            style="background: url(&quot;chrome-extension://jpjgjbbhaifmiigkopmnpbgcgmigaame/imgs/map/tip-top.png&quot;) repeat-x; --darkreader-inline-bgcolor: initial;"
            data-darkreader-inline-bgcolor=""></div>
        <div id="tip-right-top"
            style="background: url(&quot;chrome-extension://jpjgjbbhaifmiigkopmnpbgcgmigaame/imgs/map/tip-right-top.png&quot;); --darkreader-inline-bgcolor: initial;"
            data-darkreader-inline-bgcolor=""></div>
        <div id="tip-right"
            style="background: url(&quot;chrome-extension://jpjgjbbhaifmiigkopmnpbgcgmigaame/imgs/map/tip-right.png&quot;) repeat-y; --darkreader-inline-bgcolor: initial;"
            data-darkreader-inline-bgcolor=""></div>
        <div id="tip-right-bottom"
            style="background: url(&quot;chrome-extension://jpjgjbbhaifmiigkopmnpbgcgmigaame/imgs/map/tip-right-bottom.png&quot;); --darkreader-inline-bgcolor: initial;"
            data-darkreader-inline-bgcolor=""></div>
        <div id="tip-bottom"
            style="background: url(&quot;chrome-extension://jpjgjbbhaifmiigkopmnpbgcgmigaame/imgs/map/tip-bottom.png&quot;) repeat-x; --darkreader-inline-bgcolor: initial;"
            data-darkreader-inline-bgcolor=""></div>
        <div id="tip-left-bottom"
            style="background: url(&quot;chrome-extension://jpjgjbbhaifmiigkopmnpbgcgmigaame/imgs/map/tip-left-bottom.png&quot;); --darkreader-inline-bgcolor: initial;"
            data-darkreader-inline-bgcolor=""></div>
        <div id="tip-left"
            style="background: url(&quot;chrome-extension://jpjgjbbhaifmiigkopmnpbgcgmigaame/imgs/map/tip-left.png&quot;); --darkreader-inline-bgcolor: initial;"
            data-darkreader-inline-bgcolor=""></div>
        <div id="trans-content"></div>
    </div>
    <div id="tip-arrow-bottom"
        style="background: url(&quot;chrome-extension://jpjgjbbhaifmiigkopmnpbgcgmigaame/imgs/map/tip-arrow-bottom.png&quot;); --darkreader-inline-bgcolor: initial;"
        data-darkreader-inline-bgcolor=""></div>
    <div id="tip-arrow-top"
        style="background: url(&quot;chrome-extension://jpjgjbbhaifmiigkopmnpbgcgmigaame/imgs/map/tip-arrow-top.png&quot;); --darkreader-inline-bgcolor: initial;"
        data-darkreader-inline-bgcolor=""></div>
</div>
<div class="ReactModalPortal"></div>
<div class="ReactModalPortal"></div>

{% endblock %}

{% block  script %}  
{{  super()  }}  


<script  type="text/javascript">

$(function () {

    $("#submit-message").click(chat); 

});

function chat(){
        

        let data ={
           "room_id" : {{room.id}},
           "role":{{user.id}},
           "message" : $('#message').val()
        }

        $('#spinner-grow').show();
        $('#submit-message').prop('disabled', true);
        $('#message').prop('disabled', true);
        $('#message').val("") 

        $.ajax({
            type: "post", // è¯·æ±‚æ–¹å¼
            contentType: "application/json;charset=utf-8",
            data:JSON.stringify(data),
            url: "/api/chat",// login + "v1/userLogin?loginName=" + data.loginName + "&loginType=" + data.loginType + "&password=" + data.password,
            dataType: "json", // è¿”å›æ•°æ®ç±»å‹ï¼Œæ•°æ®ç±»å‹å¯ä»¥ä¸º text xml json  script  jsonp
            success: function (res) { // è¿”å›çš„å‚æ•°å°±æ˜¯ actioné‡Œé¢æ‰€æœ‰çš„æœ‰getå’Œsetæ–¹æ³•çš„å‚æ•°
            if (res.statu == "ok") {
        
                $("#scrollview").prepend(res.info);//åŠ åœ¨å‰é¢ï¼ŒappendåŠ åœ¨åé¢

            } 
            $('#spinner-grow').hide();
            $('#submit-message').prop('disabled', false);
            $('#message').prop('disabled', false);
            },

            error: function (data, status, e) {
                $('.spinner-border').hide();
                $('#submit-message').prop('disabled', false);
                $('#message').prop('disabled', false);
            }

      });


};

    

</script>


{% endblock %}
